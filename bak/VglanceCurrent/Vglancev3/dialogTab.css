/* ===============================
   Dialog 基本与 Arc Peek 动画
   =============================== */

/* 顶层遮罩 */
.dialog-container {
  z-index: 999999999;
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.4);
  transition: background-color 0.1s ease;
  backdrop-filter: blur(2px);
  display: flex;
  justify-content: center;
  align-items: center;
}

/* dialog-tab 基础 */
.dialog-tab {
  position: absolute; /* 我们使用 absolute 在顶层 container 内定位 */
  display: flex;
  flex-direction: column;
  transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: left, top, width, height, transform, opacity;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
  border-radius: var(--radius);
  overflow: hidden;
  background: var(--colorBg);
  opacity: 0;
  transform: scale(0.5);
  visibility: hidden;
}

/* animating-in -> 目标样式（从链接位置放大到居中） */
.dialog-tab.animating-in {
  width: 50% !important;
  height: calc(100% + 5px) !important;
  margin: 5px 0;
  opacity: 1;
  transform: scale(1);
  visibility: visible;
}

/* animating-out -> 收回动画样式（从当前大小缩小回链接位置） */
.dialog-tab.animating-out {
  opacity: 0;
  transform: scale(0.5);
  visibility: hidden;
}

/* 遮罩下背景网页缩放（与动画时长保持一致） */
#browser #webpage-stack,
.inner #web-stack {
  transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) !important;
}
body.dialog-open #browser #webpage-stack,
body.dialog-open .inner #web-stack {
  transform: scale(0.985) !important;
}

/* progress-bar & 内部结构保留 */
@keyframes dialog-tab-animate-progress-bar {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

.dialog-tab .progress-bar {
  height: 5px;
  max-width: calc(100% - var(--radius) * 1.5);
  left: calc(var(--radius) * 0.75);
  background-color: #0080ff;
  border-radius: var(--radius);
  transition: width 0.4s linear;
  overflow: hidden;
  position: relative;
}

.dialog-tab .progress-bar[style*="width: 100%"]:after {
  content: "";
  width: 50%;
  height: 100%;
  background-image: linear-gradient(
    to right,
    rgba(255, 255, 255, 0.5),
    rgba(255, 255, 255, 0.8),
    rgba(255, 255, 255, 0.5)
  );
  position: absolute;
  top: 0;
  left: -100%;
  animation: dialog-tab-animate-progress-bar 1.5s linear infinite;
}

/* options-container 保持原样，确保层级高于 webview 内容 */
.dialog-tab .options-container {
  display: flex;
  height: 35px;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  color: white;
  z-index: 1160;
}

/* webview 内部 */
.dialog-tab webview {
  position: relative;
  flex: 1;
  overflow: hidden;
  border-radius: var(--radius);
  background: transparent;
}

/*
 * VivalArc Test CSS
 * Side Tabbar & Tab Stack Indicator Features
 * Version: 1.0.0
 * Updated: 2025-09-20
 *
 * æµ‹è¯•è¯´æ˜ï¼š
 * 1. éœ€è¦åœ¨ Vivaldi è®¾ç½®ä¸­å°†æ ‡ç­¾æ ä½ç½®è®¾ç½®ä¸º"å·¦ä¾§"æˆ–"å³ä¾§"
 * 2. å¯ç”¨"æ ‡ç­¾åç€è‰²"è®¾ç½®ä¸º"å…³é—­"
 * 3. åœ¨ vivaldi://experiments ä¸­å¯ç”¨"å…è®¸CSSä¿®æ”¹"
 * 4. é‡å¯Vivaldiç”Ÿæ•ˆ
 */

:root {
  --window-border: 4px;
  --tab-padding: calc(var(--window-border) / 2);
  --colorToviTransparent: transparent;
}

/* ========================================
   ä¾§è¾¹æ ‡ç­¾æ é«˜çº§åŠŸèƒ½
   ======================================== */

/* ä¾§è¾¹æ ‡ç­¾æ å®¹å™¨é€æ˜èƒŒæ™¯ */
.tabs-left .tabbar-wrapper,
.tabs-right .tabbar-wrapper {
  background-color: transparent;
  overflow: visible;
}

/* è‡ªé€‚åº”å†…è¾¹è· - ä¸ºæ²¡æœ‰ .tab-small å­å…ƒç´ çš„æ ‡ç­¾æ å®¹å™¨è®¾ç½®å†…è¾¹è· */
.tabs-left .inner > .tabbar-wrapper:not(:has(.tab-small)),
.tabs-right .inner > .tabbar-wrapper:not(:has(.tab-small)) {
  margin: 0 var(--tab-padding);
}

/* æŠ˜å ç®­å¤´å®½åº¦ä¼˜åŒ– - æ ¹æ®å®¹å™¨å®½åº¦å’Œå†…è¾¹è·åŠ¨æ€è®¡ç®— */
.tabs-left .accordion-toggle-arrow,
.tabs-right .accordion-toggle-arrow {
  max-width: calc(var(--Width) - 16px + (var(--tab-padding) * 2));
}

/* æ ‡ç­¾å­—ä½“é¢œè‰²è®¾ç½® */
.tabs-left .tab-position .tab,
.tabs-right .tab-position .tab {
  color: var(--colorFg);
}

/* å·¥ä½œåŒºæŒ‰é’®ä¸æ ‡ç­¾æ ç»„åˆä¼˜åŒ– - æ·»åŠ é¡¶éƒ¨é—´è· */
.tabbar-workspace-button + #tabs-tabbar-container.left,
.tabbar-workspace-button + #tabs-tabbar-container.right {
  padding-top: 4px;
}

/* é€æ˜æ ‡ç­¾æ å®¹å™¨ */
#browser.transparent-tabbar #tabs-tabbar-container.left,
#browser.transparent-tabbar #tabs-tabbar-container.right,
#browser:not(.transparent-tabbar) #tabs-tabbar-container {
  background: var(--colorToviTransparent);
  border: none;
  box-shadow: none;
}

/* æ ‡ç­¾æ åº•éƒ¨å†…è¾¹è· */
#browser.tabs-left .inner > .tabbar-wrapper,
#browser.tabs-right .inner > .tabbar-wrapper {
  padding-bottom: var(--window-border);
}

/* ========================================
   æ ‡ç­¾å †æ ˆæŒ‡ç¤ºå™¨
   ======================================== */

/* æ ‡ç­¾æŒ‡ç¤ºå™¨åŸºç¡€æ ·å¼ - ä»…åœ¨"æ ‡ç­¾åç€è‰²å…³é—­"æ¨¡å¼ä¸‹ç”Ÿæ•ˆ */
.color-behind-tabs-off .tab-indicator {
  background-color: var(--colorAccentBgAlpha);
}

.color-behind-tabs-off .tab-indicator:hover {
  background-color: var(--colorAccentBg);
}

.color-behind-tabs-off .tab-indicator.active {
  background-color: var(--colorAccentBg);
}

/* æ ‡ç­¾ç»„å†…æ´»è·ƒæ ‡ç­¾çš„æŒ‡ç¤ºå™¨ */
.color-behind-tabs-off
  .tab.active
  + .tab-group-indicator
  .tab-indicator.active {
  background-color: var(--colorAccentBg);
}

/* æ ‡ç­¾å †æ ˆå®¹å™¨é€æ˜åŒ– */
#browser:not(.tabs-top):not(.tabs-bottom).color-behind-tabs-off
  #tabs-subcontainer.left,
#browser:not(.tabs-top):not(.tabs-bottom).color-behind-tabs-off
  #tabs-subcontainer.right {
  box-shadow: none;
}

#browser:not(.tabs-top):not(.tabs-bottom).color-behind-tabs-off
  #tabs-subcontainer,
#browser:not(.tabs-top):not(.tabs-bottom).transparent-tabbar
  #tabs-subcontainer {
  background-color: transparent;
}

/* ========================================
   è°ƒè¯•å’Œæµ‹è¯•è¾…åŠ©åŠŸèƒ½
   ======================================== */

/* è°ƒè¯•ç”¨è¾¹æ¡† - å¯ä»¥å¯ç”¨æ¥æŸ¥çœ‹å…ƒç´ è¾¹ç•Œ */
/*
.tabs-left .tabbar-wrapper,
.tabs-right .tabbar-wrapper,
#tabs-tabbar-container.left,
#tabs-tabbar-container.right {
  border: 1px dashed red !important;
}
 */

/* è°ƒç”¨ä¿¡æ¯ - å¸®åŠ©ç†è§£å“ªäº›æ ·å¼æ­£åœ¨ç”Ÿæ•ˆ */
/*
.tabs-left .tabbar-wrapper::before,
.tabs-right .tabbar-wrapper::before {
  content: "Tabbar Wrapper";
  position: absolute;
  top: -20px;
  left: 0;
  font-size: 10px;
  color: red;
  background: yellow;
  padding: 2px;
}
 */

/* ========================================
   ä½¿ç”¨è¯´æ˜
   ======================================== */

/*
 * ğŸ¯ åŠŸèƒ½æµ‹è¯•æŒ‡å—ï¼š
 *
 * 1. ä¾§è¾¹æ ‡ç­¾æ æ»šåŠ¨æ¡éšè—ï¼š
 *    - å½“æ ‡ç­¾è¿‡å¤šæ—¶ï¼Œæ»šåŠ¨æ¡ä¼šè‡ªåŠ¨éšè—
 *    - å¯é€šè¿‡é¼ æ ‡æ»šè½®æˆ–è§¦æ‘¸æ¿æ»šåŠ¨
 *
 * 2. è‡ªé€‚åº”å†…è¾¹è·ï¼š
 *    - è°ƒæ•´ --window-border å˜é‡è§‚å¯Ÿé—´è·å˜åŒ–
 *    - æ ‡ç­¾ä¼šè‡ªåŠ¨é€‚åº”çª—å£è¾¹æ¡†å®½åº¦
 *
 * 3. æŠ˜å ç®­å¤´ä¼˜åŒ–ï¼š
 *    - å·¥ä½œåŒºæŠ˜å ç®­å¤´ä¼šæ ¹æ®å®¹å™¨å®½åº¦è‡ªåŠ¨è°ƒæ•´
 *    - é˜²æ­¢æº¢å‡ºå’Œè§†è§‰ä¸åè°ƒ
 *
 * 4. æ ‡ç­¾å †æ ˆæŒ‡ç¤ºå™¨ï¼š
 *    - åœ¨è®¾ç½®ä¸­å…³é—­"æ ‡ç­¾åç€è‰²"æŸ¥çœ‹æ•ˆæœ
 *    - æ ‡ç­¾åˆ†ç»„æŒ‡ç¤ºå™¨ä¼šä½¿ç”¨åŠé€æ˜èƒŒæ™¯
 *    - æ‚¬åœæ—¶å˜ä¸ºå®è‰²èƒŒæ™¯
 *
 * 5. ç»„åˆä¼˜åŒ–ï¼š
 *    - å·¥ä½œåŒºæŒ‰é’®å’Œæ ‡ç­¾æ ä¹‹é—´æœ‰4pxé—´è·
 *    - æ•´ä½“å¸ƒå±€æ›´åŠ åè°ƒç»Ÿä¸€
 *
 * âš ï¸  æ³¨æ„äº‹é¡¹ï¼š
 *    - ä»…åœ¨ä¾§è¾¹æ ‡ç­¾æ å¸ƒå±€ä¸‹ç”Ÿæ•ˆ
 *    - éœ€è¦é‡å¯Vivaldiæ‰èƒ½çœ‹åˆ°æ•ˆæœ
 *    - æŸäº›åŠŸèƒ½å¯èƒ½éœ€è¦ç‰¹å®šçš„Vivaldiè®¾ç½®
 */

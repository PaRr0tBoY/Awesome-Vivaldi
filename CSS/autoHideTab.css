/* Adjust Configure In :root */
:root {
  /* Tabbar's width when they expand or collapse */
  --tabs-container-collapse-width: 44px; /* min width of main tabbar should not set lower than 6px, which will cause weird issue. */
  --tabs-container-expand-width: 300px;
  --tabs-subcontainer-collapse-width: 44px;
  --tabs-subcontainer-expand-width: 300px;

  --Button-newtab-main-width: calc(var(--tabs-container-expand-width) / 2);
  --Button-newtab-sub-width: calc(var(--tabs-subcontainer-expand-width) / 2);

  /* Adjust tabbar margin and padding */
  --tabbar-margin-top: -5px;
  --tabbar-margin-bottom: 0px;
  --tabbar-padding: 7px; /* Set to 0 if any tabs position problem */

  /* Adjust tabbars' border radius when they expand or collapse */
  --tabbar-border-radius-expand: 17px;
  --tabbar-border-radius-collapse: 3px;
  /* Set to zero if you don't want round corner when tabbar collapsed */

  /* Animation speed when tabbars expand or collapse */
  --slow-animation-speed: 560ms;
  --animation-speed: 280ms;
  --fast-animation-speed: 140ms;

  /* Animation Delay Time */
  --transition-delay-time-expand: 0ms;
  --transition-delay-time-collapse: 0ms;

  /* Adjust tabbars' color when they expand or collapse */

  /* Light Theme */
  /* ============================================ */
  /* --tabbar-bg-color-collapse: rgb(160, 177, 178);
  --tabbar-bg-color-expand: rgb(201, 222, 223);
  --tabbar-border-color-collapse: rgba(223, 249, 253, 1);
  --tabbar-border-color-expand: rgba(0, 251, 255, 1); */
  /* ============================================ */

  /* Dark Theme */
  /* ============================================ */
  --tabbar-bg-color-collapse: rgb(27, 27, 28);
  --tabbar-bg-color-expand: rgb(53, 58, 63);
  --tabbar-border-color-collapse: rgba(2, 33, 65, 1);
  --tabbar-border-color-expand: rgb(45, 123, 139);
  /* ============================================ */

  /* My Theme(Green) */
  /* ============================================ */
  /* --tabbar-bg-color-collapse: rgba(25, 30, 25, 1);
  --tabbar-bg-color-collapse: rgba(25, 30, 25, 1);
  --tabbar-bg-color-expand: rgba(11, 41, 17, 1);
  --tabbar-border-color-collapse: rgba(0, 73, 45, 1);
  --tabbar-border-color-expand: rgba(1, 131, 133, 1);
  --tabbar-margin-top: -5px;
  --tabbar-margin-bottom: 0px;
  --tabbar-padding: 7px; 
  --tabbar-border-radius-expand: 17px;
  --tabbar-border-radius-collapse: 3px; */
  /* ============================================ */

  /* Debug */
  /* --tabs-container-bg-color: red;
  --tabs-subcontainer-bg-color: green; */
}

/* ========================================
   AUTO-HIDE TABBAR
   ======================================== */

/* Main Tabbar*/

/* Adjust hide animation and width of main tabbar here */
/* I set its width very small since I think this has more of a "hidden" vibe,
and I figure people may want to focus more on sub-stack when they're working on a certain subject
with a tab-stack. Which is why we need tab-stack no? */
#tabs-container {
  min-width: var(--tabs-container-collapse-width) !important;
  max-width: var(--tabs-container-collapse-width) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  background-color: var(--tabbar-bg-color-collapse) !important;
  border-radius: var(--tabbar-border-radius-collapse) !important;
  border: 1px dotted var(--tabbar-border-color-collapse) !important;
  /* will-change: transform !important; */
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-collapse) !important;
  /* transition-delay: var(--transition-delay-time-expand) !important; */
  box-sizing: border-box !important;
  position: relative !important;
  overflow: visible !important;
  /* overflow-y: auto !important;
  overflow-x: hidden !important; */
}

/* When the tabs-subcontainer is hovered, the tabs-container immediately collapses. */
#tabs-tabbar-container:has(#tabs-subcontainer:hover) #tabs-container {
  transition-delay: var(--transition-delay-time-expand) !important;
}

/* Adjust expand width of main tabbar here */
#tabs-container:hover {
  min-width: var(--tabs-container-expand-width) !important;
  max-width: var(--tabs-container-expand-width) !important;
  background-color: var(--tabbar-bg-color-expand) !important;
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-collapse) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  box-sizing: border-box !important;
  /* transition-delay: 60ms !important; */
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer)) #tabs-container.left:hover{
  border-radius: 0px var(--tabbar-border-radius-expand) var(--tabbar-border-radius-expand) 0px !important;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer)) #tabs-container.right:hover {
  border-radius: var(--tabbar-border-radius-expand) 0px 0px var(--tabbar-border-radius-expand) !important;
}

/* SubStack / Secondary Tabbar */

#tabs-subcontainer {
  min-width: var(--tabs-subcontainer-collapse-width) !important;
  max-width: var(--tabs-subcontainer-collapse-width) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  padding-top: var(--tabbar-padding) !important;
  background-color: var(--tabbar-bg-color-collapse) !important;
  border-radius: var(--tabbar-border-radius-collapse) !important;
  border: 1px dotted var(--tabbar-border-color-collapse) !important;
  transition:
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    transform var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-collapse) !important;
  /* transition-delay: var(--transition-delay-time-expand) !important; */
  box-sizing: border-box !important;
  position: relative !important;
  will-change: transform !important;
}

#tabs-subcontainer:hover {
  transition-delay: var(--transition-delay-time-collapse) !important;
}

/* #tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer {
  transition-delay: var(--transition-delay-time-expand) !important;
} */

#tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer.right{
  border-radius: var(--tabbar-border-radius-expand) 0px 0px var(--tabbar-border-radius-expand) !important;
}

#tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer.left{
  border-radius: 0px var(--tabbar-border-radius-expand) var(--tabbar-border-radius-expand) 0px !important;
}

/* Enhanced conditions for keeping tabbar expanded */
/* When StackEditor modal is present or AddressField is focused */
body:has(:is(.button-popup, .toolbar-editor, .UrlBar-AddressField:focus-within, #vivaldi-tooltip:hover)) #tabs-container {
  min-width: var(--tabs-container-expand-width) !important;
  max-width: var(--tabs-container-expand-width) !important;
  background-color: var(--tabbar-bg-color-expand) !important;
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-expand) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  box-sizing: border-box !important;
}

body:has(:is(.button-popup, .toolbar-editor, .UrlBar-AddressField:focus-within)) #tabs-subcontainer {
  transition-delay: var(--transition-delay-time-expand) !important;
}

/* ================================================================================= */

/* Adjust expand width of Secondary tabbar here */
body:not(:has(.button-popup)):not(:has(.toolbar-editor)):not(:has(.UrlBar-AddressField:focus-within))
  #tabs-subcontainer:hover {
/* #tabs-subcontainer:hover { */
  min-width: var(--tabs-subcontainer-expand-width) !important;
  max-width: var(--tabs-subcontainer-expand-width) !important;
  background-color: var(--tabbar-bg-color-expand) !important;
  transition:
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    transform var(--animation-speed) ease-out !important;
  transition-delay: 0ms !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  padding-top: var(--tabbar-padding) !important;
  box-sizing: border-box !important;
}

#tabs-subcontainer.left:hover{
  border-radius: 0px var(--tabbar-border-radius-expand) var(--tabbar-border-radius-expand) 0px !important;
}
#tabs-subcontainer.right:hover {
  border-radius: var(--tabbar-border-radius-expand) 0px 0px var(--tabbar-border-radius-expand) !important;
}

body:has(:is(.button-popup, .toolbar-editor, .UrlBar-AddressField:focus-within)) #tabs-subcontainer.left{
  border-radius: 0 var(--tabbar-border-radius-expand) var(--tabbar-border-radius-expand) 0 !important;
}

body:has(:is(.button-popup, .toolbar-editor, .UrlBar-AddressField:focus-within)) #tabs-subcontainer.right {
  border-radius: var(--tabbar-border-radius-expand) 0 0 var(--tabbar-border-radius-expand) !important;
}

body:has(:is(.button-popup, .toolbar-editor, .UrlBar-AddressField:focus-within))
  :not(:has(#tabs-subcontainer)) 
  #tabs-container.left
{
  border-radius: 0 var(--tabbar-border-radius-expand) var(--tabbar-border-radius-expand) 0 !important;
}

body:has(:is(.button-popup, .toolbar-editor, .UrlBar-AddressField:focus-within))
  :not(:has(#tabs-subcontainer)) 
  #tabs-container.right
{
  border-radius: var(--tabbar-border-radius-expand) 0 0 var(--tabbar-border-radius-expand) !important;
}

/* Fix container bouncing: Add smooth transition to overall container */
#tabs-tabbar-container {
  width: auto !important;
  min-width: var(
    --tabs-container-collapse-width
  ) !important; /* main stack width when it fold */
  max-width: calc(
    var(--tabs-container-expand-width)+var(--tabs-subcontainer-collapse-width)
  ) !important; /* Combine total of expand width of stack and substack when one of them is hovered */
  /* padding: var(--tabbar-padding) var(--tabbar-padding) var(--tabbar-padding) 0 !important; */
  background-color: transparent !important;
  background-image: none !important;
  border: none !important;
  border-radius: var(--tabbar-border-radius-expand);
  /*border-color: black !important;
  border-width: 1px !important;*/
  box-shadow: none !important;
  box-sizing: border-box !important;
  transition:
    width var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  position: relative !important;
  display: flex !important;
  flex-direction: row !important;
  align-items: stretch !important;
  /* width: calc(var(--tabs-container-collapse-width) + var(--tabs-subcontainer-collapse-width)) !important; */
}

/* When the tabs-container is hovered, the container width increases. */
/* #tabs-tabbar-container:has(#tabs-container:hover) {
  width: calc(var(--tabs-container-expand-width) + var(--tabs-subcontainer-collapse-width)) !important;
  transition-delay: var(--transition-delay-time-expand) !important;
}

#tabs-tabbar-container:has(#tabs-subcontainer:hover) {
  width: calc(var(--tabs-container-collapse-width) + var(--tabs-subcontainer-expand-width)) !important;
  transition-delay: var(--transition-delay-time-expand) !important;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer)) {
  width: var(--tabs-container-collapse-width) !important;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer)):has(#tabs-container:hover) {
  width: var(--tabs-container-expand-width) !important;
} */

/* #tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer,
#tabs-tabbar-container:has(#tabs-subcontainer:hover) #tabs-container{
  pointer-events:none !important;
} */

/* Border Color */
#tabs-tabbar-container #tabs-container:hover {
  border: 1px solid var(--tabbar-border-color-expand) !important;
}
#tabs-tabbar-container #tabs-subcontainer:hover {
  border: 1px solid var(--tabbar-border-color-expand) !important;
}
/* Correct tab bar order: When right tab bar, main tab bar is on the right; when left tab bar, main tab bar is on the left */
/* Right tab bar: Sub tab bar on left, main tab bar on right */
#tabs-tabbar-container.right #tabs-subcontainer.right {
  order: 1 !important;
  flex-shrink: 0 !important;
}

#tabs-tabbar-container.right #tabs-container.right {
  order: 2 !important;
  flex-shrink: 0 !important;
}

/* Left tab bar: Main tab bar on left, sub tab bar on right */
#tabs-tabbar-container.left #tabs-container.left {
  order: 1 !important;
  flex-shrink: 0 !important;
}

#tabs-tabbar-container.left #tabs-subcontainer.left {
  order: 2 !important;
  flex-shrink: 0 !important;
}

/* Tab bar styling */
.tabbar-workspace-button {
  width: 100% !important;
}

/* Disabled tabbar resize */
#tabs-tabbar-container .SlideBar {
  display: none !important;
}

/* Prevent black background behind tabs-container at left */
.tabbar-wrapper:has(#tabs-container.left) {
  background-color: transparent !important;
}

/* Hide scrollbars for left and right tabbars */
#browser #tabs-tabbar-container.left ::-webkit-scrollbar,
#browser #tabs-tabbar-container.right ::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbars for left and right tabbar wrappers */
.tabs-left .tabbar-wrapper,
.tabs-right .tabbar-wrapper {
  background-color: transparent;
  overflow: visible;
}

/* #tabs-tabbar-container {
  display: flex;
  align-items: center;
} */

.toolbar.toolbar-tabbar {
  position: relative; 
}
body:has(.button-popup) .button-toolbar.newtab, 
.toolbar.toolbar-tabbar:hover .button-toolbar.newtab,
.toolbar.toolbar-tabbar-after:hover .button-toolbar.newtab,
.toolbar.toolbar-tabbar-before:hover .button-toolbar.newtab{
  opacity: 1;
  visibility: visible;
}
.button-toolbar.newtab{
  /* width: 50px;
  position: absolute !important;
  bottom: 10px !important;
  left: calc(50% - 25px) !important; */
  z-index: 100 !important;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
  overflow: hidden;
}
#tabs-subcontainer .button-toolbar.newtab {
  width: var(--Button-newtab-sub-width);
  position: absolute !important;
  bottom: 10px !important;
  left: calc(50% - var(--Button-newtab-sub-width) / 2) !important;
  z-index: 100 !important;
  border-radius: 5px !important;
}

#tabs-container .button-toolbar.newtab {
  width: var(--Button-newtab-main-width);
  z-index: 100 !important;
  border-radius: 5px !important;
}


/* .button-toolbar.newtab{
  left: 0px !important;
  width: 150px;
} */
/* I hate newtab button. But if you have the opposite opinion,replace below codes with these


And of course you don't need those lockers icon when your tabbar expand on hover so here's how you hide em.

.button-toolbar.tabs-locked,
.button-toolbar.tabs-unlocked {
  display: none !important;
}
*/
.button-toolbar.tabs-locked,
.button-toolbar.tabs-unlocked {
  display: none !important;
}

/* .tab:not(.active)
{filter: blur(4px) !important;
transition: filter 200ms linear !important
}
.tab.active
{filter: blur(0px) !important;
transition: filter 200ms linear !important
} */

/* ========================================
   HIDE ELEMENTS ON HOVER
   ======================================== */

/* #tabs-container .tab-strip.overflow {
  margin-right: calc(var(--densityGap) * 2) !important;
  margin-left: calc(var(--densityGap) * 2) !important;
  transition: margin var(--animation-speed) ease-out !important;
  transition-delay: 0ms !important;
} */

  /* margin: 0 max(calc(var(--densityGap) * 2), 1px) !important;
} */
#tabs-container .tab-strip.overflow {
  min-width: auto !important;
  max-width: auto !important;
  margin: 0 max(calc(var(--densityGap) * 2), 1px) !important;
}

#tabs-subcontainer .tab-strip.overflow{
  min-width: auto !important;
  max-width: auto !important;
  margin: 0 max(calc(var(--densityGap) * 2), 1px) !important;
}

body:not(:has(.button-popup)):not(:has(.toolbar-editor)):not(:has(.UrlBar-AddressField:focus-within))
  #tabs-container .resize {
  max-height: none !important;
  height: 100% !important;
  flex: 1 !important;
}


/* ========================================
   BEFORE TOOLBAR
   ======================================== */

.toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget {
  z-index: 99999999999 !important; /* Fixed search suggestions popup covered by tabs */
  margin-right: 5px !important;
  margin-left: 5px !important;
  margin-top: 7px;
  margin-bottom: 7px;
  transform: scaleY(1);
  transform-origin: top !important;
  overflow: hidden;
  opacity: 1;
  max-height: 35px;
  flex-shrink: 0 !important;
  transition: transform var(--animation-speed) ease-out,
              max-height var(--animation-speed) ease-out,
              background-color var(--animation-speed) ease-out,
              opacity var(--fast-animation-speed) ease-out;
  position: relative;
  
  & > *:not(.UrlBar-AddressField) {
    opacity: 0;
    max-height: 0px;
    overflow: hidden;
    transition: max-height var(--animation-speed) ease-out,
                transform var(--animation-speed) ease-out,
                opacity var(--animation-speed) ease-out;
  }
  
  .UrlBar-AddressField{
    background-color: var(--tabbar-bg-color-collapse);
    border-color: var(--tabbar-bg-color-collapse);
  }
  border: 1px solid var(--tabbar-bg-color-expand) !important;
  border-radius: 12px !important;
}

#tabs-container:hover .toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget {
  background-color: var(--tabbar-bg-color-expand);
  border: 1px solid var(--tabbar-bg-color-expand) !important;
  border-radius: 12px !important;
}

/* .toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="grey" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><polyline points="15 9 10 14 15 19"/></svg>');
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  opacity: 1;
  transition: opacity var(--animation-speed) ease-out;
  pointer-events: none;
  z-index: 10;
}

body:has(:is(.UrlBar-AddressField:focus-within, .toolbar-editor, .button-popup)) .toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget::before,
.toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget:hover::before,
body:has(#tabs-container:hover) .toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget::before,
body:has(#tabs-container:focus-within) .toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget::before {
  opacity: 0;
} */

body:has(:is(.UrlBar-AddressField:focus-within, .toolbar-editor, .button-popup)) .toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget,
.toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget:hover {
  transform: scaleY(1) !important;
  opacity: 1 !important;
  max-height: 150px;
  overflow: visible !important;
  transform-origin: top !important;
  background-color: var(--tabbar-bg-color-expand) !important;
  transition: transform var(--animation-speed) ease-out,
              max-height var(--animation-speed) ease-out,
              background-color var(--animation-speed) ease-out,
              opacity var(--fast-animation-speed) ease-out;
              
  & > *:not(.UrlBar-AddressField) {
    opacity: 1;
    max-height: 200px;
    transition: max-height var(--animation-speed) ease-out,
                transform var(--animation-speed) ease-out,
                opacity var(--animation-speed) ease-out;
  } 
  
  .UrlBar-AddressField{
    background-color: black;
    border-color: grey;
  }
}

/* ========================================
   AFTER TOOLBAR
   ======================================== */

.toolbar.toolbar-tabbar-after.toolbar-large.toolbar-droptarget {
  background-color: var(--tabbar-bg-color-expand) !important;
  position: absolute !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  display: flex !important;
  justify-content: center !important;
  flex-wrap: wrap !important;
  align-items: flex-end !important;
  align-content: flex-end !important;
  overflow: visible !important;
  max-height: 150px !important;
  min-height: 85px !important;
  opacity: 1 !important;
  /* visibility: visible !important; */
  pointer-events: auto !important;
  transition:
    min-height 0s ease-out var(--transition-delay-time-collapse),
    max-height 0s ease-out var(--transition-delay-time-collapse),
    opacity var(--fast-animation-speed) ease-out var(--transition-delay-time-collapse) !important;
    /* visibility 0s ease-out !important; */
  z-index: 10 !important;
  padding: 5px !important;
  border-radius: var(--tabbar-border-radius-expand) !important;

  & > *:not(.button-toolbar.newtab) {
    flex-shrink: 0 !important;
    background-color: var(--tabbar-bg-color-expand) !important;
  }
  & > .button-toolbar.newtab{
    background-color: transparent !important;
    flex-shrink: 0 !important;
  }
}

body:not(:has(.button-popup)):not(:has(.toolbar-editor)):not(:has(.UrlBar-AddressField:focus-within))
  #tabs-container:not(:hover) .toolbar.toolbar-tabbar-after.toolbar-large.toolbar-droptarget {
  opacity: 0 !important;
  /* visibility: hidden !important; */
  max-width: 0px !important;
  max-width: 0px !important;
  pointer-events: none !important;
  transition:
    min-width 0s ease-out var(--transition-delay-time-collapse),
    max-width 0s ease-out var(--transition-delay-time-collapse),
    opacity var(--fast-animation-speed) ease-out 0s !important;
}

body:not(:has(.button-popup)):not(:has(.toolbar-editor)):not(:has(.UrlBar-AddressField:focus-within))
#tabs-container .resize {
  padding-bottom: 85px !important;
}

body:not(:has(.button-popup)):not(:has(.toolbar-editor)):not(:has(.UrlBar-AddressField:focus-within))
  #tabs-container:not(:hover) .resize {
  padding-bottom: 0px !important;
}

#tabs-tabbar-container #tabs-container {
  /* overflow: hidden !important; */
  box-sizing: border-box !important;
}

/* ========================================
   FLOATING TABBAR
   ======================================== */
/* If you want the expanded tabbar floating on the website instead of squeezing it, just add the following css to the css above */
/* But read the comments before you do */

#main > .inner > div:has(#tabs-tabbar-container) {
  position: absolute;
  top: 0;
  z-index: 2;
  opacity: 1;
  background-color: transparent !important;
  background-image: none !important;
  height: 100% !important;
}

#main > .inner > div:has(#tabs-tabbar-container.right) {
  right: 0;
}

#main > .inner > div:has(#tabs-tabbar-container.left) {
  left: 0;
}

#browser.transparent-tabbar
  .inner
  > div:has(#tabs-tabbar-container:is(.left, .right)) {
  background-color: transparent !important;
  backdrop-filter: none !important;
}

/*=================== Webpage stack margins - Auto Calculation ===================*/

/* Auto-detect tabbar position and apply appropriate margins */

/* Right tabbar margins */
#browser:not(.fullscreen):has(#tabs-tabbar-container.right)
  .inner
  #webpage-stack {
  margin-right: var(--tabs-container-collapse-width);
  transition: margin-right var(--animation-speed) ease-out !important;
}

#browser:not(.fullscreen)
  :has(#tabs-tabbar-container.right)
  .inner:has(#tabs-subcontainer:is(.left, .right))
  #webpage-stack {
  margin-right: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

#browser:not(.fullscreen) #tabs-tabbar-container.right ~ #webpage-stack {
  margin-right: var(--tabs-container-collapse-width);
}

#browser:not(.fullscreen)
  #tabs-tabbar-container.right
  ~ #webpage-stack:has(#tabs-subcontainer.right) {
  margin-right: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

/* Left tabbar margins */
#browser:not(.fullscreen):has(#tabs-tabbar-container.left)
  .inner
  #webpage-stack {
  margin-left: var(--tabs-container-collapse-width);
  transition: margin-left var(--animation-speed) ease-out !important;
}

#browser:not(.fullscreen)
  :has(#tabs-tabbar-container.left)
  .inner:has(#tabs-subcontainer:is(.left, .right))
  #webpage-stack {
  margin-left: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

#browser:not(.fullscreen) #tabs-tabbar-container.left ~ #webpage-stack {
  margin-left: var(--tabs-container-collapse-width);
}

#browser:not(.fullscreen)
  #tabs-tabbar-container.left
  ~ #webpage-stack:has(#tabs-subcontainer.left) {
  margin-left: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

/* This mod only works when the Vivaldi UI language is set to English/Chinese.
   Add your own language support by editing the selectors below. */


/* Icon Position */
.tab-audio,
.panel-audio {
  margin-top: 1px;
  margin-left: 1px !important;
  overflow: visible !important;
  position: relative;
}

#vivaldi-tooltip .tooltip .tooltip-item .tooltip-audio-button .audioicon {
  margin-top: -1.5px;
  margin-left: -1px;
}

/* Make the original canvas icon transparent and remove its dimensions */
.tab-audio canvas.audioicon,
.tooltip-audio-button canvas.audioicon,
.audio-container canvas.audioicon,
.button-icon.audio canvas.audioicon,
.panel-audio canvas.audioicon {
  opacity: 0 !important;
  /*width: 0 !important;
  height: 0 !important;*/
  position: absolute !important;
}

/* Position the parent containers so the pseudo-elements can be placed correctly */
.tab-audio,
.tooltip-audio-button,
.panel-audio,
.audio-container,
.button-icon.audio {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--tab-icon-size);
  height: var(--tab-icon-size);
}

/* --- Generic Pseudo-element Style --- */
/* Apply the icon to the container, not the canvas itself */
.tab-audio::before,
.panel-audio::before,
.tooltip-audio-button::before,
.audio-container::before,
.button-icon.audio::before {
  content: "";
  display: inline-block;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: var(--colorAccentFg, #000);
  mask-repeat: no-repeat;
  mask-position: center;
  mask-size: contain;
  transition: transform 0.15s ease-out;
  pointer-events: none;
}

/* --- Size Variations --- */

/* Audio icon in tab */
.tab-audio::before,
.tooltip-audio-button::before {
  width: var(--tab-icon-size);
  height: var(--tab-icon-size);
}

/* Audio icon in workspace popup */
.audio-container::before,
.button-icon.audio::before {
  width: var(--popup-icon-size);
  height: var(--popup-icon-size);
}

/* Audio icon in panel */
.panel-audio::before {
  /*z-index: 999 !important;*/
  width: var(--panel-icon-size);
  height: var(--panel-icon-size);
}

/* --- State Detection --- */
/* Playing State: Select the container if its child canvas has the "Mute" title */

.audio-container:has(.audioicon[title*="Mute"]),
.audio-container:has(.audioicon[title="标签静音"]),
.tooltip-audio-button:has(.audioicon[title*="Mute"]),
.tooltip-audio-button:has(.audioicon[title="标签静音"]),
.button-icon.audio:has(.audioicon[title*="Mute"]),
.button-icon.audio:has(.audioicon[title="标签静音"]),
.tab-audio:has(.audioicon[title*="Mute"]),
.tab-audio:has(.audioicon[title="标签静音"]),
.panel-audio:has(.audioicon[title*="Mute"]),
.panel-audio:has(.audioicon[title="面板静音"]) {
  /* Apply the animated icon */
  &::before {
    mask-image: url("data:image/svg+xml,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%20135%20140%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22%22%3E%3Crect%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%2230%22%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%2260%22%20width%3D%2215%22%20height%3D%22140%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%2290%22%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.25s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3Crect%20x%3D%22120%22%20y%3D%2210%22%20width%3D%2215%22%20height%3D%22120%22%20rx%3D%226%22%3E%3Canimate%20attributeName%3D%22height%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%22120%3B110%3B100%3B90%3B80%3B70%3B60%3B50%3B40%3B140%3B120%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3Canimate%20attributeName%3D%22y%22%20begin%3D%220.5s%22%20dur%3D%221s%22%20values%3D%2210%3B15%3B20%3B25%3B30%3B35%3B40%3B45%3B50%3B0%3B10%22%20calcMode%3D%22linear%22%20repeatCount%3D%22indefinite%22%2F%3E%3C%2Frect%3E%3C%2Fsvg%3E") !important;
  }
}

/* Muted State: Select the container if its child canvas has the "Unmute" title */
.audio-container:has(.audioicon[title*="Unmute"]),
.audio-container:has(.audioicon[title="取消标签静音"]),
.tooltip-audio-button:has(.audioicon[title*="Unmute"]),
.tooltip-audio-button:has(.audioicon[title="取消标签静音"]),
.button-icon.audio:has(.audioicon[title*="Unmute"]),
.button-icon.audio:has(.audioicon[title="取消标签静音"]),
.tab-audio:has(.audioicon[title*="Unmute"]),
.tab-audio:has(.audioicon[title*="取消标签静音"]),
.panel-audio:has(.audioicon[title*="Unmute"]),
.panel-audio:has(.audioicon[title*="取消面板静音"]) {
  /* Apply the static icon */
  &::before {
    mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxMzYgMTQwIiBmaWxsPSIjZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHg9IjQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iMzQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iNjQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iOTQiIHk9IjcwIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHJ4PSI2Ii8+PHJlY3QgeD0iMTI0IiB5PSI3MCIgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1IiByeD0iNiIvPjwvc3ZnPg==") !important;
  }
}

/* --- Hover Effect --- */
/*.tooltip-audio-button:hover::before,*/
.tab-audio:hover::before,
.panel-audio:hover::before,
.audio-container:hover::before,
.button-icon.audio:hover::before {
  transform: translate(-50%, -50%) scale(1.15);
}


#browser:not(.alt-tabs) #tabs-container .tab.audio-on .favicon, #browser:not(.alt-tabs) #tabs-container .tab.audio-muted .favicon, #browser:not(.alt-tabs) #tabs-container .tab.tab-captured .favicon {
    transition-delay: 0ms;
    transform: scale(0) !important;
}

#tabs-container .tab.tab-small.audio-on .tab-audio, #tabs-container .tab.pinned.audio-on .tab-audio, #tabs-container .tab.tab-small.audio-muted .tab-audio, #tabs-container .tab.pinned.audio-muted .tab-audio, #tabs-container .tab.tab-small.tab-captured .tab-audio, #tabs-container .tab.pinned.tab-captured .tab-audio {
    left: 7px !important;
    top: 5px !important;
    /* height: unset;
    width: unset; */
    transform: scale(1) !important;
    background-color: unset !important;
}

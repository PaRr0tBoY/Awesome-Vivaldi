/*
 * VivalArc Tools CSS
 * Enhanced browser customization features
 * Version: 1.0.0
 * Updated: 2025-09-20
 */

:root {
  /* Shadow Effects for rounded webviews */
  --webview-shadow-light:
    0px 1px 3px 0px rgba(0, 0, 0, 0.1),
    0px 0px var(--window-border) 0px rgba(0, 0, 0, 0.1);
  --webview-shadow-dark:
    0px 2px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 8px 0px rgba(0, 0, 0, 0.05),
    0px 0px 0px 1.2px #ffffff18;

  /* Large corner radius optimized shadows */
  --webview-shadow-large-light:
    0px 8px 24px 0px rgba(0, 0, 0, 0.15), 0px 16px 48px 0px rgba(0, 0, 0, 0.12),
    0px 2px 8px 0px rgba(0, 0, 0, 0.1),
    inset 0px 1px 2px 0px rgba(255, 255, 255, 0.2);
  --webview-shadow-large-dark:
    0px 12px 32px 0px rgba(0, 0, 0, 0.25),
    0px 24px 64px 0px rgba(0, 0, 0, 0.18), 0px 4px 12px 0px rgba(0, 0, 0, 0.15),
    inset 0px 1px 2px 0px rgba(255, 255, 255, 0.1);

  /* Corner radius for webview and bottom border */
  --radiusCap: 15px;
}

/* ========================================
   BREAK MODE FUNCTIONALITY
   ======================================== */

/* Break mode - makes main browser content transparent */
#browser.break-mode #main {
  opacity: 0;
}

/* ========================================
   DEFAULT BROWSER MODAL HIDING
   ======================================== */

/* Hide default browser modal dialog */
#modal-bg.default-browser {
  display: none;
}

/* ========================================
   ROUNDED WEBVIEW WITH SHADOWS
   ======================================== */

/* Enable visible overflow for rounded corners */
#main,
#main > .inner,
#webview-container {
  overflow: visible;
  background: transparent;
}

/* Rounded webview stack with theme-specific shadows */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen) #webpage-stack {
  border-radius: 15px 15px 15px 15px;
  /* Fix white edges by ensuring proper background and overflow */
  background: transparent;
  overflow: hidden;
  /* Apply large corner radius optimized shadows */
  box-shadow: var(--webview-shadow-large-light);
  /* Enhance visual separation */
  transform: translateZ(0);
  will-change: transform;
  transition: box-shadow 0.3s ease;
}

/* Enhanced shadow on hover for better interactivity */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  #webpage-stack:hover {
  box-shadow:
    var(--webview-shadow-large-light),
    0px 0px 0px 1px rgba(0, 0, 0, 0.1);
}

/* Large corner radius theme-specific shadows */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen).theme-light
  #webpage-stack {
  box-shadow: var(--webview-shadow-large-light);
  /* Add subtle border for light theme */
  border: 1px solid rgba(0, 0, 0, 0.08);
}

#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen).theme-dark
  #webpage-stack {
  box-shadow: var(--webview-shadow-large-dark);
  /* Add subtle border for dark theme */
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Enhanced hover effect for dark theme */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen).theme-dark
  #webpage-stack:hover {
  box-shadow:
    var(--webview-shadow-large-dark),
    0px 0px 0px 1px rgba(255, 255, 255, 0.15);
}

/* Remove shadows for tiled/mosaic layouts */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  #webpage-stack:has(.tiled .visible),
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  #webpage-stack:has(.mosaic .visible) {
  box-shadow: none;
  border: none;
}

/* ========================================
   EXTRA ENHANCED SHADOW MODE (Optional)
   ======================================== */

/* Uncomment the following block for even more dramatic shadows */

/*
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen) #webpage-stack {
  box-shadow:
    0px 20px 40px 0px rgba(0, 0, 0, 0.2),
    0px 40px 80px 0px rgba(0, 0, 0, 0.15),
    0px 10px 20px 0px rgba(0, 0, 0, 0.12),
    inset 0px 2px 4px 0px rgba(255, 255, 255, 0.3);
}

#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen).theme-dark #webpage-stack {
  box-shadow:
    0px 25px 50px 0px rgba(0, 0, 0, 0.35),
    0px 50px 100px 0px rgba(0, 0, 0, 0.25),
    0px 15px 30px 0px rgba(0, 0, 0, 0.2),
    inset 0px 2px 4px 0px rgba(255, 255, 255, 0.15);
}
*/

/* ========================================
   EXTENSION ICON OPTIMIZATIONS
   ======================================== */

/* Hidden extension icon styling */
#browser:not(.tabs-top):not(.tabs-bottom) .ExtensionIcon--Hidden {
  background-color: transparent;
}

/* Expanded extension toggle icon transparency */
.color-behind-tabs-off
  .ExtensionToggleIcon.ExtensionToggleIcon--extensionsExpanded {
  background-color: transparent;
}

/* ========================================
   BOOKMARK BAR STYLING
   ======================================== */

/* Bookmark bar styling with transparent background */
#browser:not(.tabs-top):not(.tabs-bottom).color-behind-tabs-off.bookmark-bar-top
  .bookmark-bar,
#browser:not(.tabs-top):not(.tabs-bottom).color-behind-tabs-off
  .bookmark-bar
  button {
  background: var(--colorTabBar);
  color: var(--colorFg);
  border-bottom-width: 0;
  border-radius: var(--radiusHalf);
}

/* ========================================
   WORKSPACE BUTTON STYLING
   ======================================== */

/* Transparent workspace buttons for various tab positions */
#browser.transparent-tabbar
  .button-toolbar.workspace-popup.tabbar-workspace-button,
#browser.transparent-tabbar.tabs-left
  .button-toolbar.workspace-popup.tabbar-workspace-button,
#browser.transparent-tabbar.tabs-right
  .button-toolbar.workspace-popup.tabbar-workspace-button,
.tabs-left .button-toolbar.workspace-popup.tabbar-workspace-button,
.tabs-right .button-toolbar.workspace-popup.tabbar-workspace-button {
  box-shadow: none;
  background: var(--colorToviTransparent);
}

/* Workspace button color for transparent tabbar */
#browser:not(.tabs-top):not(.tabs-bottom).transparent-tabbar
  .button-toolbar.workspace-popup.tabbar-workspace-button.button-menu {
  color: var(--colorFg);
}

/* Workspace button padding adjustments */
#app .tabs-left .button-toolbar.workspace-popup.tabbar-workspace-button button,
#app
  .tabs-right
  .button-toolbar.workspace-popup.tabbar-workspace-button
  button {
  padding-left: 4px;
  padding-right: 4px;
}

/* Disabled menu indicator opacity */
.button-toolbar.button-menu .button-toolbar-menu-indicator.disabled {
  opacity: 0.3;
}

/* ========================================
   TILE/MOSAIC LAYOUT ENHANCEMENTS
   ======================================== */

/* Remove shadows and backgrounds from tiled layouts */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  #webview-container:has(#webpage-stack .tiled .visible),
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  #webview-container:has(#webpage-stack .mosaic .visible) {
  box-shadow: none;
  padding: 0;
}

/* Transparent mosaic split lines and tiles */
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  .mosaic-split
  .mosaic-split-line,
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen)
  .mosaic-split
  .mosaic-split-line:before,
.mosaic-split .mosaic-split-line:after,
#browser:not(.tabs-top):not(.tabs-bottom):not(.fullscreen) .tile,
#browser:not(.inner, .narrow-tiling) .tiled.visible .tile[data-id] {
  background: transparent;
  box-shadow: none;
}

/* ========================================
   FOOTER DISPLAY STYLING
   ======================================== */

/* Transparent footer for various layouts */
#browser:not(.tabs-bottom):not(.tabs-top) footer#footer,
:not(.tabs-bottom)#browser > footer,
#browser > footer > .toolbar-statusbar {
  background: transparent;
  border: none;
}

/* ========================================
   ADDITIONAL ENHANCEMENTS
   ======================================== */

/* Tabbar button opacity enhancement */
#browser:not(.tabs-top):not(.tabs-bottom)
  .toolbar-tabbar
  > .button-toolbar
  > button {
  opacity: 0.4;
}

#browser:not(.tabs-top):not(.tabs-bottom)
  .toolbar-tabbar
  > .button-toolbar
  > button:hover {
  opacity: 0.8;
}

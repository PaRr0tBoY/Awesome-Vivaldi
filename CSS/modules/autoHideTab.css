/* Adjust Configure In :root */
:root {
  /* Tabbar's width when they expand or collapse */
  --tabs-container-collapse-width: 7px; /* min width of main tabbar should not set lower than 6px, which will cause weird issue. */
  --tabs-container-expand-width: 281px;
  --tabs-subcontainer-collapse-width: 44px;
  --tabs-subcontainer-expand-width: 287px;

  --Button-newtab-main-width: calc(var(--tabs-container-expand-width) / 2);
  --Button-newtab-sub-width: calc(var(--tabs-subcontainer-expand-width) / 2);

  /* Adjust tabbar margin and padding */
  --tabbar-margin-top: -6px;
  --tabbar-margin-bottom: 1px;
  --tabbar-padding: 7px; /* Set to 0 if any tabs position problem */

  /* Adjust tabbars' border radius when they expand or collapse */
  /* --tabbar-border-radius-expand: 17px; */
  /* Expand tab bar border change accordingly to border radius set in browser theme*/
  --tabbar-border-radius-collapse: 3px;
  /* Set to zero if you don't want round corner when tabbar collapsed */

  /* Animation speed when tabbars expand or collapse */
  --slow-animation-speed: 560ms;
  --animation-speed: 240ms;
  --fast-animation-speed: 140ms;

  /* Animation Delay Time */
  --transition-delay-time-expand: 0ms;
  --transition-delay-time-collapse: 50ms;

  /* Adjust tabbars' color when they expand or collapse */

  /* Adaptive Skin */
  /* ============================================ */
  /* If you didn't set custom theme color, Tab bar accent from your browser theme color automatically */
  /* ============================================ */

  /* Light Skin */
  /* ============================================ */
  /* --tabbar-bg-color-collapse: rgb(160, 177, 178);
  --tabbar-bg-color-expand: rgb(201, 222, 223);
  --tabbar-border-color-collapse: rgba(223, 249, 253, 1);
  --tabbar-border-color-expand: rgba(0, 251, 255, 1); */
  /* ============================================ */

  /* Dark Skin */
  /* ============================================ */
  /* --tabbar-bg-color-collapse: rgb(27, 27, 28);
  --tabbar-bg-color-expand: rgb(53, 58, 63); */
  /* --tabbar-border-color-collapse: rgba(66, 73, 80, 0.856); You can still add your own color */
  /* --tabbar-border-color-expand: rgb(45, 123, 139); */
  /* ============================================ */

  /* My Skin(Green) */
  /* ============================================ */
  /* --tabbar-bg-color-collapse: rgba(25, 30, 25, 1); */
  /* --tabbar-bg-color-expand: rgba(11, 41, 17, 0.4); */
  /* --tabbar-border-color-collapse: rgba(0, 73, 45, 1); */
  /* --tabbar-border-color-expand: rgba(1, 131, 133, 1); */
  /* ============================================ */

  /* Debug */
  /* --tabs-container-bg-color: red;
  --tabs-subcontainer-bg-color: green; */
}

/* ========================================
   AUTO-HIDE TABBAR
   ======================================== */

/* Main Tabbar*/
/* Adjust hide animation and width of main tabbar here */
/* I set its width very small since I think this has more of a "hidden" vibe,
and I figure people may want to focus more on sub-stack when they're working on a certain subject
with a tab-stack. Which is why we need tab-stack no? */
#tabs-container {
  container-type: inline-size;
  container-name: tabs-container;
  min-width: var(--tabs-container-collapse-width) !important;
  max-width: var(--tabs-container-collapse-width) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  background-color: var(--tabbar-bg-color-collapse, var(--colorBg)) !important;
  border-radius: var(--tabbar-border-radius-collapse) !important;
  border: 1px dotted var(--tabbar-border-color-collapse, var(--colorBgLighter)) !important;
  /* will-change: transform !important; */
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-collapse) !important;
  /* transition-delay: var(--transition-delay-time-expand) !important; */
  box-sizing: border-box !important;
  position: relative !important;
  overflow: visible !important;
  /* overflow-y: auto !important;
  overflow-x: hidden !important; */
}

/* When the tabs-subcontainer is hovered, the tabs-container immediately collapses. */
#tabs-tabbar-container:has(#tabs-subcontainer:hover) #tabs-container {
  transition-delay: var(--transition-delay-time-expand) !important;
}

/* Adjust expand width of main tabbar here */
body:not(:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within, #panel_switch)))
#tabs-container:hover {
  min-width: var(--tabs-container-expand-width) !important;
  max-width: var(--tabs-container-expand-width) !important;
  background-color: var(
    --tabbar-bg-color-expand,
    var(--colorBgDarker)
  ) !important;
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-collapse) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  box-sizing: border-box !important;
  /* transition-delay: 60ms !important; */
}

/* Main Tabbar Peek */
body:not(:has(:is(.WorkspacePopup, #panel_switch, .toolbar-editor, .UrlBar-AddressField:focus-within))) #tabs-tabbar-container:hover #tabs-container:not(:hover) {
  /*min-width: calc(var(--tabs-subcontainer-collapse-width) - 6px) !important;
  max-width: calc(var(--tabs-subcontainer-collapse-width) - 6px) !important;*/
  min-width: calc(var(--tabs-container-collapse-width) + 30px) !important;
  max-width: calc(var(--tabs-container-collapse-width) + 30px) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  background-color: var(--tabbar-bg-color-collapse, var(--colorBg)) !important;
  border-radius: var(--tabbar-border-radius-collapse) !important;
  border: 1px dotted var(--tabbar-border-color-collapse, var(--colorBgLighter)) !important;
  /* will-change: transform !important; */
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  /* transition-delay: var(--transition-delay-time-collapse) !important; */
  /* transition-delay: var(--transition-delay-time-expand) !important; */
  box-sizing: border-box !important;
  position: relative !important;
  overflow: hidden !important;
  & .tab-position .tab-header {
    padding-left: 0 !important;
    justify-content: center !important;
  }

  &
    .tab-strip
    > span:has(.is-pinned):nth-child(-n + 9)
    .is-pinned
    .tab-wrapper {
    background-color: var(--colorBg, rgba(255, 255, 255, 0.2)) !important;
    border: 1px solid var(--colorHighlightBgDark) !important;
  }
}

#tabs-container .tab.tab-small.tab-mini .tab-header,
#tabs-container .tab.pinned.tab-mini .tab-header {
  justify-content: left;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer))
  #tabs-container.left:hover {
  border-radius: 0px calc(var(--radius) + 5px) calc(var(--radius) + 5px) 0px !important;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer))
  #tabs-container.right:hover {
  border-radius: calc(var(--radius) + 5px) 0px 0px calc(var(--radius) + 5px) !important;
}

body:not(:has(:is(#panel_switch, .WorkSpacePopup, .toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within, #vivaldi-tooltip:hover))) #tabs-tabbar-container:not(:has(#tabs-subcontainer))
  #tabs-container:not(:hover) {
  min-width: calc(var(--tabs-container-collapse-width) + 30px) !important;
  max-width: calc(var(--tabs-container-collapse-width) + 30px) !important;
}
/* SubStack / Secondary Tabbar */

#tabs-subcontainer {
  min-width: var(--tabs-subcontainer-collapse-width) !important;
  max-width: var(--tabs-subcontainer-collapse-width) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  padding-top: var(--tabbar-padding) !important;
  background-color: var(--tabbar-bg-color-collapse, var(--colorBg)) !important;
  border-radius: var(--tabbar-border-radius-collapse) !important;
  border: 1px dotted var(--tabbar-border-color-collapse, var(--colorBgLighter)) !important;
  transition:
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    transform var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-collapse) !important;
  /* transition-delay: var(--transition-delay-time-expand) !important; */
  box-sizing: border-box !important;
  position: relative !important;
  will-change: transform !important;
}

#tabs-subcontainer:hover {
  transition-delay: var(--transition-delay-time-collapse) !important;
}

/* #tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer {
  transition-delay: var(--transition-delay-time-expand) !important;
} */

#tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer.right {
  border-radius: calc(var(--radius) + 5px) 0px 0px calc(var(--radius) + 5px) !important;
}

#tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer.left {
  border-radius: 0px calc(var(--radius) + 5px) calc(var(--radius) + 5px) 0px !important;
}

/* Enhanced conditions for keeping tabbar expanded */
/* When StackEditor modal is present or AddressField is focused */
body:has(
    :is(
      /*.button-popup,*/
      .WorkspacePopup,
      .toolbar-editor,
      #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within,
      #vivaldi-tooltip:hover
    )
  )
  #tabs-container {
  min-width: var(--tabs-container-expand-width) !important;
  max-width: var(--tabs-container-expand-width) !important;
  background-color: var(
    --tabbar-bg-color-expand,
    var(--colorBgDarker)
  ) !important;
  transition:
    /* transform var(--smooth-animation-speed) ease-out, */
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  transition-delay: var(--transition-delay-time-expand) !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  box-sizing: border-box !important;
}

body:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within))
  #tabs-subcontainer {
  transition-delay: var(--transition-delay-time-expand) !important;
}

/* ================================================================================= */

/* Adjust expand width of Secondary tabbar here */
/* body:not(:has(.toolbar-editor)):not(:has(#tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within)) */
body:not(:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within, #panel_switch)))
  #tabs-subcontainer:hover {
  /* #tabs-subcontainer:hover { */
  min-width: var(--tabs-subcontainer-expand-width) !important;
  max-width: var(--tabs-subcontainer-expand-width) !important;
  background-color: var(
    --tabbar-bg-color-expand,
    var(--colorBgDarker)
  ) !important;
  transition:
    border-radius var(--animation-speed) ease-out,
    border var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out,
    background-color var(--animation-speed) ease-out,
    transform var(--animation-speed) ease-out !important;
  transition-delay: 0ms !important;
  margin-top: var(--tabbar-margin-top) !important;
  margin-bottom: var(--tabbar-margin-bottom) !important;
  padding-top: var(--tabbar-padding) !important;
  box-sizing: border-box !important;
}

#tabs-subcontainer.left:hover {
  border-radius: 0px calc(var(--radius) + 5px) calc(var(--radius) + 5px) 0px !important;
}
/* #tabs-subcontainer.right:hover {
  border-radius: calc(var(--radius) + 5px) 0px 0px calc(var(--radius) + 5px) !important;
} */

#tabs-subcontainer.right:hover {
  border-radius: calc(var(--radius) + 5px) 0px 0px calc(var(--radius) + 5px) !important;
}

body:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within))
  #tabs-subcontainer.left {
  border-radius: 0 calc(var(--radius) + 5px) calc(var(--radius) + 5px) 0 !important;
}

body:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within))
  #tabs-subcontainer.right {
  border-radius: calc(var(--radius) + 5px) 0 0 calc(var(--radius) + 5px) !important;
}

body:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within))
  :not(:has(#tabs-subcontainer))
  #tabs-container.left {
  border-radius: 0 calc(var(--radius) + 5px) calc(var(--radius) + 5px) 0 !important;
}

body:has(:is(.toolbar-editor, #tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within))
  :not(:has(#tabs-subcontainer))
  #tabs-container.right {
  border-radius: calc(var(--radius) + 5px) 0 0 calc(var(--radius) + 5px) !important;
}

/* Fix container bouncing: Add smooth transition to overall container */
#tabs-tabbar-container {
  width: auto !important;
  min-width: var(
    --tabs-container-collapse-width
  ) !important; /* main stack width when it fold */
  max-width: calc(
    var(--tabs-container-expand-width)+var(--tabs-subcontainer-collapse-width)
  ) !important; /* Combine total of expand width of stack and substack when one of them is hovered */
  /* padding: var(--tabbar-padding) var(--tabbar-padding) var(--tabbar-padding) 0 !important; */
  background-color: transparent !important;
  background-image: none !important;
  border: none !important;
  border-radius: calc(var(--radius) + 5px);
  /*border-color: black !important;
  border-width: 1px !important;*/
  box-shadow: none !important;
  box-sizing: border-box !important;
  transition:
    width var(--animation-speed) ease-out,
    min-width var(--animation-speed) ease-out,
    max-width var(--animation-speed) ease-out !important;
  position: relative !important;
  display: flex !important;
  flex-direction: row !important;
  align-items: stretch !important;
  /* width: calc(var(--tabs-container-collapse-width) + var(--tabs-subcontainer-collapse-width)) !important; */
}

/* When the tabs-container is hovered, the container width increases. */
/* #tabs-tabbar-container:has(#tabs-container:hover) {
  width: calc(var(--tabs-container-expand-width) + var(--tabs-subcontainer-collapse-width)) !important;
  transition-delay: var(--transition-delay-time-expand) !important;
}

#tabs-tabbar-container:has(#tabs-subcontainer:hover) {
  width: calc(var(--tabs-container-collapse-width) + var(--tabs-subcontainer-expand-width)) !important;
  transition-delay: var(--transition-delay-time-expand) !important;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer)) {
  width: var(--tabs-container-collapse-width) !important;
}

#tabs-tabbar-container:not(:has(#tabs-subcontainer)):has(#tabs-container:hover) {
  width: var(--tabs-container-expand-width) !important;
} */

/* #tabs-tabbar-container:has(#tabs-container:hover) #tabs-subcontainer,
#tabs-tabbar-container:has(#tabs-subcontainer:hover) #tabs-container{
  pointer-events:none !important;
} */

/* Border Color */
#tabs-tabbar-container #tabs-container:hover {
  border: 1px solid
    var(--tabbar-border-color-expand, var(--colorAccentBgFadedMost)) !important;
}
#tabs-tabbar-container #tabs-subcontainer:hover {
  border: 1px solid
    var(--tabbar-border-color-expand, var(--colorAccentBgFadedMost)) !important;
}

/* Tabbar Order */

#tabs-tabbar-container.right #tabs-subcontainer.right {
  order: 1 !important;
  flex-shrink: 0 !important;
}

#tabs-tabbar-container.right #tabs-container.right {
  order: 2 !important;
  flex-shrink: 0 !important;
}

#tabs-tabbar-container.left #tabs-container.left {
  order: 1 !important;
  flex-shrink: 0 !important;
}

#tabs-tabbar-container.left #tabs-subcontainer.left {
  order: 2 !important;
  flex-shrink: 0 !important;
}

/* Tab bar styling */
.tabbar-workspace-button {
  width: 100% !important;
}

/* Disabled tabbar resize */
#tabs-tabbar-container .SlideBar {
  display: none !important;
}

/* Prevent black background behind tabs-container at left */
.tabbar-wrapper:has(#tabs-container.left) {
  background-color: transparent !important;
}

/* Hide scrollbars for left and right tabbars */
#browser #tabs-tabbar-container.left ::-webkit-scrollbar,
#browser #tabs-tabbar-container.right ::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbars for left and right tabbar wrappers */
.tabs-left .tabbar-wrapper,
.tabs-right .tabbar-wrapper {
  background-color: transparent;
  overflow: visible;
}

/* #tabs-tabbar-container {
  display: flex;
  align-items: center;
} */

.toolbar.toolbar-tabbar {
  position: relative;
}
body:has(.toolbar-editor) .button-toolbar.newtab,
.toolbar.toolbar-tabbar:hover .button-toolbar.newtab,
.toolbar.toolbar-tabbar-after:hover .button-toolbar.newtab,
.toolbar.toolbar-tabbar-before:hover .button-toolbar.newtab {
  opacity: 1;
  visibility: visible;
}
body:not(:has(.toolbar-editor)) .button-toolbar.newtab {
  /* width: 50px;
  position: absolute !important;
  bottom: 10px !important;
  left: calc(50% - 25px) !important; */
  z-index: 100 !important;
  opacity: 0;
  visibility: hidden;
  transition:
    opacity 0.2s ease-in-out,
    visibility 0.2s ease-in-out;
  overflow: hidden;
}
#tabs-subcontainer .button-toolbar.newtab {
  width: var(--Button-newtab-sub-width);
  position: absolute !important;
  bottom: 10px !important;
  left: calc(50% - var(--Button-newtab-sub-width) / 2) !important;
  z-index: 100 !important;
  border-radius: 5px !important;
}

#tabs-container .button-toolbar.newtab {
  width: var(--Button-newtab-main-width);
  z-index: 100 !important;
  border-radius: 5px !important;
}

/* .button-toolbar.newtab{
  left: 0px !important;
  width: 150px;
} */
/* I hate newtab button. But if you have the opposite opinion,replace below codes with these


And of course you don't need those lockers icon when your tabbar expand on hover so here's how you hide em.

.button-toolbar.tabs-locked,
.button-toolbar.tabs-unlocked {
  display: none !important;
}
*/
.button-toolbar.tabs-locked,
.button-toolbar.tabs-unlocked {
  display: none !important;
}

/* .tab:not(.active)
{filter: blur(4px) !important;
transition: filter 200ms linear !important
}
.tab.active
{filter: blur(0px) !important;
transition: filter 200ms linear !important
} */

/* ========================================
   HIDE ELEMENTS ON HOVER
   ======================================== */

/* #tabs-container .tab-strip.overflow {
  margin-right: calc(var(--densityGap) * 2) !important;
  margin-left: calc(var(--densityGap) * 2) !important;
  transition: margin var(--animation-speed) ease-out !important;
  transition-delay: 0ms !important;
} */
/* body:not(:has(.toolbar-editor)):not(:has(.UrlBar-AddressField:focus-within))
  #tabs-container
  .resize {
  max-height: none !important;
  height: 100% !important;
  flex: 1 !important;
} */

#tabs-subcontainer .tab .title {
  display: flex !important;
}

.tab-position:not(.is-pinned) .tab-header,
#tabs-subcontainer .tab-header {
  padding-left: 6px !important;
}
/* ====
/* margin: 0 max(calc(var(--densityGap) * 2), 1px) !important;
} */
#tabs-container .tab-strip {
  /*min-width: auto !important;
  max-width: auto !important;*/
  /* margin: 0 max(calc(var(--densityGap) * 2), 1px) !important; */
  margin: unset !important;
}

#tabs-subcontainer .tab-strip {
  min-width: auto !important;
  max-width: auto !important;
  margin: 0 max(calc(var(--densityGap) * 2), 1px) !important;
  /* margin: auto !important; */
}


/* @container tabs-container (max-width: 15px) {
  #tabs-container:not(:hover) > *:not(:is(.UrlBar-AddressField, .workspace-popup)) {
    min-width: 0 !important;
    max-width: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    opacity: 0 !important;
    transition:
      min-width 0s ease-out var(--transition-delay-time-collapse),
      max-width 0s ease-out var(--transition-delay-time-collapse),
      opacity var(--slow-animation-speed) ease-out 0s !important;
    pointer-events: none !important;
  }
} */

@container tabs-container (max-width: 15px) {
  .tab-position .tab-wrapper {
    opacity: 0 !important;
  }
}

/* Process toolbar */
#tabs-tabbar-container .toolbar-tabbar-after {
  align-content: flex-end;
}

/* @container tabs-container (max-width: calc(var(--tabs-container-expand-width) - 6px)) { */
@container tabs-container (max-width: 275px) {
  .toolbar-tabbar-before > *:not(:is(.UrlBar-AddressField, .workspace-popup)),
  /* .toolbar-tabbar-after > *, */
  .toolbar-tabbar-after
  {
    min-width: 0 !important;
    max-width: 0 !important;
    min-height: 0 !important;
    max-height: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    opacity: 0 !important;
    transition:
      min-width 0s ease-out calc(var(--transition-delay-time-collapse) + var(--animation-speed)),
      max-width 0s ease-out calc(var(--transition-delay-time-collapse) + var(--animation-speed)),
      min-height 0s ease-out calc(var(--transition-delay-time-collapse) + var(--animation-speed)),
      max-height 0s ease-out calc(var(--transition-delay-time-collapse) + var(--animation-speed)),
      opacity 0ms ease-out 0s !important;
    pointer-events: none !important;
  }
}

#tabs-tabbar-container #tabs-container {
  overflow: hidden !important;
  box-sizing: border-box !important;
}

body:has(:is(#tabs-tabbar-container .toolbar-tabbar-before .UrlBar-AddressField:focus-within, .toolbar-editor, .button-popup))
  #tabs-container,
body:has(.toolbar.toolbar-tabbar-before.toolbar-large.toolbar-droptarget:hover)
  #tabs-container {
  overflow: visible !important;
}
/* ========================================
   FLOATING TABBAR
   ======================================== */
/* If you want the expanded tabbar floating on the website instead of squeezing it, just add the following css to the css above */
/* But read the comments before you do */

#main > .inner > div:has(#tabs-tabbar-container) {
  position: absolute;
  top: 0;
  z-index: 2;
  opacity: 1;
  background-color: transparent !important;
  background-image: none !important;
  height: 100% !important;
}

#main > .inner > div:has(#tabs-tabbar-container.right) {
  right: 0;
}

#main > .inner > div:has(#tabs-tabbar-container.left) {
  left: 0;
}

#browser.transparent-tabbar
  .inner
  > div:has(#tabs-tabbar-container:is(.left, .right)) {
  background-color: transparent !important;
  backdrop-filter: none !important;
}

/*=================== Webpage stack margins - Auto Calculation ===================*/

/* Auto-detect tabbar position and apply appropriate margins */

/* Right tabbar margins */
#browser:not(.fullscreen):has(#tabs-tabbar-container.right)
  .inner
  #webpage-stack {
  margin-right: calc(var(--tabs-container-collapse-width) + 30px);
  transition: margin-right var(--animation-speed) ease-out !important;
}

#browser:not(.fullscreen)
  :has(#tabs-tabbar-container.right)
  .inner:has(#tabs-subcontainer:is(.left, .right))
  #webpage-stack {
  margin-right: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

#browser:not(.fullscreen) #tabs-tabbar-container.right ~ #webpage-stack {
  margin-right: calc(var(--tabs-container-collapse-width) + 30px);
}

#browser:not(.fullscreen)
  #tabs-tabbar-container.right
  ~ #webpage-stack:has(#tabs-subcontainer.right) {
  margin-right: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

/* Left tabbar margins */
#browser:not(.fullscreen):has(#tabs-tabbar-container.left)
  .inner
  #webpage-stack {
  margin-left: calc(var(--tabs-container-collapse-width) + 30px);
  transition: margin-left var(--animation-speed) ease-out !important;
}

#browser:not(.fullscreen)
  :has(#tabs-tabbar-container.left)
  .inner:has(#tabs-subcontainer:is(.left, .right))
  #webpage-stack {
  margin-left: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

#browser:not(.fullscreen) #tabs-tabbar-container.left ~ #webpage-stack {
  margin-left: calc(var(--tabs-container-collapse-width) + 30px);
}

#browser:not(.fullscreen)
  #tabs-tabbar-container.left
  ~ #webpage-stack:has(#tabs-subcontainer.left) {
  margin-left: calc(
    var(--tabs-container-collapse-width) +
      var(--tabs-subcontainer-collapse-width)
  );
}

/* Blur Effect */
/*#browser #webpage-stack {
  position: relative !important;
}

#browser #webpage-stack::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  background-color: var(--colorBgAlpha);
  z-index: 999999999999 !important;
  pointer-events: none !important;
  opacity: 0;
  transition: opacity var(--animation-speed) ease-out;
}

body:has(#tabs-container:hover) #webpage-stack::before,
body:has(#vivaldi-tooltip .tab-group:hover) #webpage-stack::before,
body:has(:is(.UrlBar-AddressField:focus-within, .toolbar-editor, .button-popup))
  #webpage-stack::before,
body:has(#tabs-subcontainer:hover) #webpage-stack::before {
  opacity: 1 !important;
  backdrop-filter: blur(5px);
}*/

/* AnimatedBlur */

/* #browser #webpage-stack::before {
  content: '';
  position: fixed;
  inset: 0;
  background-color: var(--colorBgAlpha);
  z-index: 999999999999 !important;
  pointer-events: none !important;
  opacity: 0;
  transform: scaleX(0);
  transform-origin: left;
  transition:
    opacity var(--animation-speed) ease-out,
    transform var(--slow-animation-speed) cubic-bezier(0.3, 0.8, 0.4, 1);
    transform var(--fast-animation-speed) cubic-bezier(0.25, 0.10, 0.25, 1.00);
}

#browser:has(#tabs-tabbar-container.left) #webpage-stack::before {
  transform-origin: left;
}

#browser:has(#tabs-tabbar-container.right) #webpage-stack::before {
  transform-origin: right;
}

body:has(#tabs-container:hover) #webpage-stack::before,
body:has(#vivaldi-tooltip .tab-group:hover) #webpage-stack::before,
body:has(:is(.UrlBar-AddressField:focus-within, .toolbar-editor, .button-popup)) #webpage-stack::before,
body:has(#tabs-subcontainer:hover) #webpage-stack::before {
  opacity: 1 !important;
  transform: scaleX(1) !important;
} */

/* Uncomment following lines to enable tabbar toggle */

#panel_switch {
  flex: 0 0 2px !important;
  background-color: transparent !important;
}
#panel_switch svg {
  display: none !important;
}

body:has(#panel_switch) {
  & #tabs-container {
    min-width: calc(var(--tabs-container-expand-width) / 1.2) !important;
    max-width: calc(var(--tabs-container-expand-width) / 1.2) !important;
  }
  & #tabs-subcontainer {
    min-width: calc(var(--tabs-container-expand-width) / 1.2) !important;
    max-width: calc(var(--tabs-container-expand-width) / 1.2) !important;
  }
}

body:has(#panel_switch)
  #browser:not(.fullscreen):has(#tabs-tabbar-container.right)
  .inner
  #webpage-stack {
  margin-right: calc(var(--tabs-container-expand-width) / 1.2);
  transition: margin-right var(--animation-speed) ease-out !important;
}

body:has(#panel_switch)
  #browser:not(.fullscreen)
  :has(#tabs-tabbar-container.right)
  .inner:has(#tabs-subcontainer:is(.left, .right))
  #webpage-stack {
  margin-right: calc((var(--tabs-container-expand-width) / 1.2) * 2);
  transition: margin-right var(--animation-speed) ease-out !important;
}

body:has(#panel_switch)
  #browser:not(.fullscreen):has(#tabs-tabbar-container.left)
  .inner
  #webpage-stack {
  margin-left: calc(var(--tabs-container-expand-width) / 1.2);
  transition: margin-left var(--animation-speed) ease-out !important;
}

body:has(#panel_switch)
  #browser:not(.fullscreen)
  :has(#tabs-tabbar-container.left)
  .inner:has(#tabs-subcontainer:is(.left, .right))
  #webpage-stack {
  margin-left: calc((var(--tabs-container-expand-width) / 1.2) * 2);
  transition: margin-left var(--animation-speed) ease-out !important;
}
